# TCP三次握手与四次挥手
##三次握手
![三次握手图片](http://7d9o4k.com1.z0.glb.clouddn.com/handshake.PNG)
##四次挥手
![四次挥手图片](http://7d9o4k.com1.z0.glb.clouddn.com/bye.PNG)
##一些问题
### 为什么采用3次握手而不是2次握手？
如果两次握手的话,客户端有可能因为网络阻塞等原因会发送多个请求报文,这时服务器就会建立连接,浪费掉许多服务器的资源

### 为什么连接的时候是三次握手，关闭的时候却是四次握手？
TCP是全双工模式，关闭连接时，当收到对方的FIN报文时，仅仅表示对方不再发送数据了但是还能接收数据，己方也未必全部数据都发送给对方了，所以己方可以立即close，也可以发送一些数据给对方后，再发送FIN报文给对方来表示同意现在关闭连接，因此，己方ACK和FIN一般都会分开发送

### 为什么TIME_WAIT状态需要经过2MSL(最大报文段生存时间)才能返回到CLOSE状态？

为了保证A发送的最后一个ACK报文能到达B。网络是不可靠的，有可以最后一个ACK丢失。所以TIME_WAIT状态就是用来重发可能丢失的ACK报文。
