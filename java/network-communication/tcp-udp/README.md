# TCP/UDP
TCP的目的是提供可靠的数据传输，并在相互进行通信的设备或服务之间保持一个虚拟连接。TCP在数据包接收无序、丢失或在交付期间被破坏时，负责数据恢复。它通过为其发送的每个数据包提供一个序号来完成此恢复。

|| TCP | UDP |
|---|--------|--------|
|是否连接| 面向连接       | 面向非连接       |
|传输可靠性|可靠|不可靠|
|应用场合|传输大量数据|少量数据|
|速度|慢|快|

##理解面向连接
面向连接的协议维护了分组之间的状态，使用这种协议的应用程序通常都会进行长期的对话。
- 发送端可以记住哪些数据已经发送出去了但还未被确认，以及数据是什么时候发送的。如果在某段时间间隔内没有收到确认，发送端可以重传数据。接收端可以记住已经收到了哪些数据，并将重复的数据丢弃。如果分组不是按序到达的，接收端可以将其保存下来，直到逻辑上先于它的分组到达为止

##TCP/IP四层协议

![TCP/IP四层协议](http://7d9o4k.com1.z0.glb.clouddn.com/tcp-ip.PNG)

##面试题
###Http是基于TCP


###QQ聊天采用UDP协议

QQ的登陆采用TCP协议和HTTP协议，你和好友之间发送消息，主要采用UDP协议，内网传文件采用了P2P技术。总来的说：

1. 登陆过程，客户端client 采用TCP协议向服务器server发送信息，HTTP协议下载信息。登陆之后，会有一个TCP连接来保持在线状态。

2. 和好友发消息，客户端client采用UDP协议，但是需要通过服务器转发。腾讯为了确保传输消息的可靠，采用上层协议来保证可靠传输。如果消息发送失败，客户端会提示消息发送失败，并可重新发送。

3. 如果是在内网里面的两个客户端传文件，QQ采用的是P2P技术，不需要服务器中转。